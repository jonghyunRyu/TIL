# β TIL (Today I Learned)

# π“– λ©΄μ ‘μ„ μ„ν• CS μ „κ³µμ§€μ‹ λ…ΈνΈ
# TCP/IP 4κ³„μΈµ λ¨λΈ
μΈν„°λ„· ν”„λ΅ν† μ½ μ¤μ„νΈλ” μΈν„°λ„·μ—μ„ μ»΄ν“¨ν„°λ“¤μ΄ μ„λ΅ μ •λ³΄λ¥Ό μ£Όκ³ λ°›λ” λ° μ“°μ΄λ” ν”„λ΅ν† μ½μ μ§‘ν•©μ΄λ©°, μ΄λ¥Ό TCP/IP 4κ³„μΈµ λ¨λΈλ΅ μ„¤λ…ν•κ±°λ‚ OSI 7κ³„μΈµ λ¨λΈλ΅ μ„¤λ…ν•κΈ°λ„ ν•λ‹¤.

## κ³„μΈµκµ¬μ΅°
TCP/IP κ³„μΈµμ€ λ„¤ κ°μ κ³„μΈµμ„ κ°€μ§€κ³  μκ³  OSI κ³„μΈµμ€ 7 κ°μ κ³„μΈµμ„ κ°€μ§€κ³  μλ‹¤.

### μ• ν”λ¦¬μΌ€μ΄μ… κ³„μΈµ
μ• ν”λ¦¬μΌ€μ΄μ… κ³„μΈµμ€ FTP, HTTP, SSH, SMTP, DNS λ“± μ‘μ© ν”„λ΅κ·Έλ¨μ΄ μ‚¬μ©λλ” ν”„λ΅ν† μ½ κ³„μΈµμ΄λ©° μ›Ή μ„λΉ„μ¤, μ΄λ©”μΌ λ“± μ„λΉ„μ¤λ¥Ό μ‹¤μ§μ μΌλ΅ μ‚¬λλ“¤μ—κ² μ κ³µν•λ” μΈµμ΄λ‹¤.

### μ „μ†΅ κ³„μΈµ
μ „μ†΅ κ³„μΈµμ€ μ†΅μ‹ μμ™€ μμ‹ μλ¥Ό μ—°κ²°ν•λ” ν†µμ‹  μ„λΉ„μ¤λ¥Ό μ κ³µν•λ©° μ—°κ²° μ§€ν–¥ λ°μ΄ν„° μ¤νΈλ¦Ό μ§€μ›, μ‹ λΆ°μ„±, νλ¦„ μ μ–΄λ¥Ό μ κ³µν•  μ μμΌλ©° μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό μΈν„°λ„· κ³„μΈµ μ‚¬μ΄μ λ°μ΄ν„°κ°€ μ „λ‹¬λ  λ• μ¤‘κ³„ μ—­ν• μ„ ν•λ‹¤. λ€ν‘μ μΌλ΅ TCPμ™€ UDPκ°€ μλ‹¤.

TCPλ” ν¨ν‚· μ‚¬μ΄μ μμ„λ¥Ό λ³΄μ¥ν•κ³  μ—°κ²°μ§€ν–¥ ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•΄μ„ μ—°κ²°μ„ ν•μ—¬ μ‹ λΆ°μ„±μ„ κµ¬μ¶•ν•΄μ„ μμ‹  μ—¬λ¶€λ¥Ό ν™•μΈν•λ©° 'κ°€μƒνμ„  ν¨ν‚· κµν™ λ°©μ‹'μ„ μ‚¬μ©ν•λ‹¤.

UDPλ” μμ„λ¥Ό λ³΄μ¥ν•μ§€ μ•κ³  μμ‹  μ—¬λ¶€λ¥Ό ν™•μΈν•μ§€ μ•μΌλ©° λ‹¨μν λ°μ΄ν„°λ§ μ£Όλ” 'λ°μ΄ν„°κ·Έλ¨ ν¨ν‚· κµν™ λ°©μ‹'μ„ μ‚¬μ©ν•λ‹¤.

```κ°€μƒνμ„  ν¨ν‚· κµν™ λ°©μ‹```   
κ°€μƒνμ„  ν¨ν‚· κµν™ λ°©μ‹μ€ κ° ν¨ν‚·μ—λ” κ°€μƒνμ„  μ‹λ³„μκ°€ ν¬ν•¨λλ©° λ¨λ“  ν¨ν‚·μ„ μ „μ†΅ν•λ©΄ κ°€μƒνμ„ μ΄ ν•΄μ λκ³  ν¨ν‚·λ“¤μ€ μ „μ†΅λ μμ„λ€λ΅ λ„μ°©ν•λ” λ°©μ‹μ„ λ§ν•λ‹¤.

```λ°μ΄ν„°κ·Έλ¨ ν¨ν‚· κµν™ λ°©μ‹```   
λ°μ΄ν„°κ·Έλ¨ ν¨ν‚· κµν™ λ°©μ‹μ΄λ€ ν¨ν‚·μ΄ λ…λ¦½μ μΌλ΅ μ΄λ™ν•λ©° μµμ μ κ²½λ΅λ¥Ό μ„ νƒν•μ—¬ κ°€λ”λ°, ν•λ‚μ λ©”μ‹μ§€μ—μ„ λ¶„ν• λ μ—¬λ¬ ν¨ν‚·μ€ μ„λ΅ λ‹¤λ¥Έ κ²½λ΅λ΅ μ „μ†΅λ  μ μμΌλ©° λ„μ°©ν• μμ„κ°€ λ‹¤λ¥Ό μ μλ” λ°©μ‹μ„ λ»ν•λ‹¤.

```TCP μ—°κ²° μ„±λ¦½ κ³Όμ •```   
TCPλ” μ‹ λΆ°μ„±μ„ ν™•λ³΄ν•  λ• '3-μ›¨μ΄ ν•Έλ“μ…°μ΄ν¬(3-way handshake)λΌλ” μ‘μ—…μ„ μ§„ν–‰ν•λ‹¤.

1. SYN λ‹¨κ³„: ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ— ν΄λΌμ΄μ–ΈνΈμ ISNμ„ λ‹΄μ•„ SYNμ„ λ³΄λ‚Έλ‹¤. ISNμ€ μƒλ΅μ΄ TCP μ—°κ²°μ μ²« λ²μ§Έ ν¨ν‚·μ— ν• λ‹Ήλ μ„μμ μ‹ν€€μ¤ λ²νΈλ¥Ό λ§ν•λ©° μ΄λ” μ¥μΉλ§λ‹¤ λ‹¤λ¥Ό μ μλ‹¤.

2. SYN + ACK λ‹¨κ³„: μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ SYNμ„ μμ‹ ν•κ³  μ„λ²„μ ISNμ„ λ³΄λ‚΄λ©° μΉμΈλ²νΈλ΅ ν΄λΌμ΄μ–ΈνΈμ ISN + 1μ„ λ³΄λ‚Έλ‹¤.

3. ACK λ‹¨κ³„: ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ ISN + 1ν• κ°’μΈ μΉμΈλ²νΈλ¥Ό λ‹΄μ•„ ACKλ¥Ό μ„λ²„μ— λ³΄λ‚Έλ‹¤.

TCPλ” μ„μ κ³Όμ •μ΄ μκΈ° λ•λ¬Έμ— μ‹ λΆ°μ„±μ΄ μλ” κ³„μΈµμ΄λΌκ³  ν•λ©° UDPλ” μ΄ κ³Όμ •μ΄ μ—†κΈ° λ•λ¬Έμ— μ‹ λΆ°μ„±μ΄ μ—†λ” κ³„μΈµμ΄λΌκ³  ν•λ‹¤.

```TCP μ—°κ²° ν•΄μ  κ³Όμ •```   
TCPκ°€ μ—°κ²°μ„ ν•΄μ ν•  λ•λ” 4-μ›¨μ΄ ν•Έλ“μ…°μ΄ν¬ κ³Όμ •μ΄ λ°μƒν•λ‹¤.

1. λ¨Όμ € ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°μ„ λ‹«μΌλ ¤κ³  ν•  λ• FINμΌλ΅ μ„¤μ •λ μ„Έκ·Έλ¨ΌνΈλ¥Ό λ³΄λ‚Έλ‹¤. κ·Έλ¦¬κ³  ν΄λΌμ΄μ–ΈνΈλ” FIN_WAIT_1 μƒνƒλ΅ λ“¤μ–΄κ°€κ³  μ„λ²„μ μ‘λ‹µμ„ κΈ°λ‹¤λ¦°λ‹¤.
2. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈλ΅ ACKλΌλ” μΉμΈ μ„Έκ·Έλ¨ΌνΈλ¥Ό λ³΄λ‚Έλ‹¤. κ·Έλ¦¬κ³  CLOSE_WAIT μƒνƒμ— λ“¤μ–΄κ°„λ‹¤. ν΄λΌμ΄μ–ΈνΈκ°€ μ„Έκ·Έλ¨ΌνΈλ¥Ό λ°›μΌλ©΄ FIN_WAIT_2 μƒνƒμ— λ“¤μ–΄κ°„λ‹¤.
3. μ„λ²„λ” ACKλ¥Ό λ³΄λ‚΄κ³  μΌμ • μ‹κ°„ μ΄ν›„μ— ν΄λΌμ΄μ–ΈνΈμ— FINμ΄λΌλ” μ„Έκ·Έλ¨ΌνΈλ¥Ό λ³΄λ‚Έλ‹¤.
4. ν΄λΌμ΄μ–ΈνΈλ” TIME_WAIT μƒνƒκ°€ λκ³  λ‹¤μ‹ μ„λ²„λ΅ ACKλ¥Ό λ³΄λ‚΄μ„ μ„λ²„λ” CLOSED μƒνƒκ°€ λλ‹¤. μ΄ν›„ ν΄λΌμ΄μ–ΈνΈλ” μ–΄λ μ •λ„μ μ‹κ°„μ„ λ€κΈ°ν• ν›„ μ—°κ²°μ΄ λ‹«νκ³  ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ λ¨λ“  μμ›μ μ—°κ²°μ΄ ν•΄μ λλ‹¤.

μ„μ κ³Όμ • μ¤‘ TIME_WAITκ°€ λ°μƒν•λ” μ΄μ λ” μ§€μ—° ν¨ν‚·μ΄ λ°μƒν•  κ²½μ°λ¥Ό λ€λΉ„ν•κΈ° μ„ν•¨μ΄λ‹¤. λ‘ λ²μ§Έλ” λ‘ μ¥μΉκ°€ μ—°κ²°μ΄ λ‹«ν”λ”μ§€ ν™•μΈν•κΈ° μ„ν•΄μ„μ΄λ‹¤.



